{% extends "base.html" %}

{% block content %}

	<h3>Hello, {{ g.user.nickname }}!</h3>

	{% include 'flash.html' %}
	<div class="well">
		<form class="form-horizontal" action="" method="post" name="post">
			{{ form.hidden_tag() }}
			<div class="control-group{% if form.errors.post %} error{% endif %}">
				<label class="control-label" for="post">Say something:</label>
				<div class="controls">
					{{ form.post(size = 30, maxlength = 140) }}
					{% for error in form.errors.post %}
					<span class="help-inline">[{{error}}]</span><br>
					{% endfor %}
				</div>
			</div>
			<div class="control-group">
				<div class="controls">
					<input class="btn btn-primary" type="submit" value="Post!">
				</div>
			</div>
		</form>
	</div>

	<!-- posts is a paginated object -->
	{% for post in posts.items %}
		{% include 'post.html' %}
	{% endfor %}

	{% if posts.has_prev %}
		<a href="{{ url_for('index', page = posts.prev_num) }}"><< Newer posts</a>
		{% else %}
		<< Newer posts
	{% endif %} |

	{% if posts.has_next %}
		<a href="{{ url_for('index', page = posts.next_num) }}"> Older posts >></a>
		{% else %}
		Older posts >>
	{% endif %}



{% endblock %}
